!function(n,t){"function"==typeof define&&(define.amd||define.cmd)?define(function(){return t(n)}):t(n,!0)}(this,function(n,t){function i(t,i,r){n.WeixinJSBridge?WeixinJSBridge.invoke(t,nt(i),function(n){tt(t,n,r)}):v(t,r)}function h(t,i,r){n.WeixinJSBridge?WeixinJSBridge.on(t,function(n){r&&r.trigger&&r.trigger(n);tt(t,n,i)}):r?v(t,r):v(t,i)}function nt(n){return n=n||{},n.appId=f.appId,n.verifyAppId=f.appId,n.verifySignType="sha1",n.verifyTimestamp=f.timestamp+"",n.verifyNonceStr=f.nonceStr,n.verifySignature=f.signature,n}function ut(n){return{timeStamp:n.timestamp+"",nonceStr:n.nonceStr,package:n.package,paySign:n.paySign,signType:n.signType||"SHA1"}}function tt(n,t,i){var r,u,e;switch(delete t.err_code,delete t.err_desc,delete t.err_detail,r=t.errMsg,r||(r=t.err_msg,delete t.err_msg,r=ft(n,r,i),t.errMsg=r),i=i||{},i._complete&&(i._complete(t),delete i._complete),r=t.errMsg||"",f.debug&&!i.isInnerInvoke&&alert(JSON.stringify(t)),u=r.indexOf(":"),e=r.substring(u+1)){case"ok":i.success&&i.success(t);break;case"cancel":i.cancel&&i.cancel(t);break;default:i.fail&&i.fail(t)}i.complete&&i.complete(t)}function ft(n,t){var f,u,e,i;if(t){switch(f=t.indexOf(":"),n){case r.config:u="config";break;case r.openProductSpecificView:u="openProductSpecificView";break;default:u=t.substring(0,f);u=u.replace(/_/g," ");u=u.replace(/\b\w+\b/g,function(n){return n.substring(0,1).toUpperCase()+n.substring(1)});u=u.substring(0,1).toLowerCase()+u.substring(1);u=u.replace(/ /g,"");-1!=u.indexOf("Wcpay")&&(u=u.replace("Wcpay","WCPay"));e=p[u];e&&(u=e)}i=t.substring(f+1);"confirm"==i&&(i="ok");"failed"==i&&(i="fail");-1!=i.indexOf("failed_")&&(i=i.substring(7));-1!=i.indexOf("fail_")&&(i=i.substring(5));i=i.replace(/_/g," ");i=i.toLowerCase();("access denied"==i||"no permission to execute"==i)&&(i="permission denied");"config"==u&&"function not exist"==i&&(i="ok");t=u+":"+i}return t}function it(n){var t,u,f,i;if(n){for(t=0,u=n.length;u>t;++t)f=n[t],i=r[f],i&&(n[t]=i);return n}}function v(n,t){if(f.debug&&!t.isInnerInvoke){var i=p[n];i&&(n=i);t&&t._complete&&delete t._complete;console.log('"'+n+'",',t||"")}}function et(){if(!("6.0.2">k||u.systemType<0)){var n=new Image;u.appId=f.appId;u.initTime=o.initEndTime-o.initStartTime;u.preVerifyTime=o.preVerifyEndTime-o.preVerifyStartTime;a.getNetworkType({isInnerInvoke:!0,success:function(t){u.networkType=t.networkType;var i="https://open.weixin.qq.com/sdk/report?v="+u.version+"&o="+u.isPreVerifyOk+"&s="+u.systemType+"&c="+u.clientVersion+"&a="+u.appId+"&n="+u.networkType+"&i="+u.initTime+"&p="+u.preVerifyTime+"&u="+u.url;n.src=i}})}}function y(){return(new Date).getTime()}function rt(t){d&&(n.WeixinJSBridge?t():w.addEventListener&&w.addEventListener("WeixinJSBridgeReady",t,!1))}function ot(){a.invoke||(a.invoke=function(t,i,r){n.WeixinJSBridge&&WeixinJSBridge.invoke(t,nt(i),r)},a.on=function(t,i){n.WeixinJSBridge&&WeixinJSBridge.on(t,i)})}var r,p,w,c,l,d,b,g,k,o,u,f,e,s,a;if(!n.jWeixin)return r={config:"preVerifyJSAPI",onMenuShareTimeline:"menu:share:timeline",onMenuShareAppMessage:"menu:share:appmessage",onMenuShareQQ:"menu:share:qq",onMenuShareWeibo:"menu:share:weiboApp",onMenuShareQZone:"menu:share:QZone",previewImage:"imagePreview",getLocation:"geoLocation",openProductSpecificView:"openProductViewWithPid",addCard:"batchAddCard",openCard:"batchViewCard",chooseWXPay:"getBrandWCPayRequest"},p=function(){var n,t={};for(n in r)t[r[n]]=n;return t}(),w=n.document,c=w.title,l=navigator.userAgent.toLowerCase(),d=-1!=l.indexOf("micromessenger"),b=-1!=l.indexOf("android"),g=-1!=l.indexOf("iphone")||-1!=l.indexOf("ipad"),k=function(){var n=l.match(/micromessenger\/(\d+\.\d+\.\d+)/)||l.match(/micromessenger\/(\d+\.\d+)/);return n?n[1]:""}(),o={initStartTime:y(),initEndTime:0,preVerifyStartTime:0,preVerifyEndTime:0},u={version:1,appId:"",initTime:0,preVerifyTime:0,networkType:"",isPreVerifyOk:1,systemType:g?1:b?2:-1,clientVersion:k,url:encodeURIComponent(location.href)},f={},e={_completes:[]},s={state:0,res:{}},rt(function(){o.initEndTime=y()}),a={config:function(n){f=n;v("config",n);var t=f.check===!1?!1:!0;rt(function(){var h,n,c;if(t)i(r.config,{verifyJsApiList:it(f.jsApiList)},function(){e._complete=function(n){o.preVerifyEndTime=y();s.state=1;s.res=n};e.success=function(){u.isPreVerifyOk=0};e.fail=function(n){e._fail?e._fail(n):s.state=-1};var n=e._completes;return n.push(function(){f.debug||et()}),e.complete=function(){for(var t=0,i=n.length;i>t;++t)n[t]();e._completes=[]},e}()),o.preVerifyStartTime=y();else{for(s.state=1,h=e._completes,n=0,c=h.length;c>n;++n)h[n]();e._completes=[]}});f.beta&&ot()},ready:function(n){0!=s.state?n():(e._completes.push(n),!d&&f.debug&&n())},error:function(n){"6.0.2">k||(-1==s.state?n(s.res):e._fail=n)},checkJsApi:function(n){var t=function(n){var t,r,i=n.checkResult;for(t in i)r=p[t],r&&(i[r]=i[t],delete i[t]);return n};i("checkJsApi",{jsApiList:it(n.jsApiList)},function(){return n._complete=function(n){if(b){var i=n.checkResult;i&&(n.checkResult=JSON.parse(i))}n=t(n)},n}())},onMenuShareTimeline:function(n){h(r.onMenuShareTimeline,{complete:function(){i("shareTimeline",{title:n.title||c,desc:n.title||c,img_url:n.imgUrl||"",link:n.link||location.href},n)}},n)},onMenuShareAppMessage:function(n){h(r.onMenuShareAppMessage,{complete:function(){i("sendAppMessage",{title:n.title||c,desc:n.desc||"",link:n.link||location.href,img_url:n.imgUrl||"",type:n.type||"link",data_url:n.dataUrl||""},n)}},n)},onMenuShareQQ:function(n){h(r.onMenuShareQQ,{complete:function(){i("shareQQ",{title:n.title||c,desc:n.desc||"",img_url:n.imgUrl||"",link:n.link||location.href},n)}},n)},onMenuShareWeibo:function(n){h(r.onMenuShareWeibo,{complete:function(){i("shareWeiboApp",{title:n.title||c,desc:n.desc||"",img_url:n.imgUrl||"",link:n.link||location.href},n)}},n)},onMenuShareQZone:function(n){h(r.onMenuShareQZone,{complete:function(){i("shareQZone",{title:n.title||c,desc:n.desc||"",img_url:n.imgUrl||"",link:n.link||location.href},n)}},n)},startRecord:function(n){i("startRecord",{},n)},stopRecord:function(n){i("stopRecord",{},n)},onVoiceRecordEnd:function(n){h("onVoiceRecordEnd",n)},playVoice:function(n){i("playVoice",{localId:n.localId},n)},pauseVoice:function(n){i("pauseVoice",{localId:n.localId},n)},stopVoice:function(n){i("stopVoice",{localId:n.localId},n)},onVoicePlayEnd:function(n){h("onVoicePlayEnd",n)},uploadVoice:function(n){i("uploadVoice",{localId:n.localId,isShowProgressTips:0==n.isShowProgressTips?0:1},n)},downloadVoice:function(n){i("downloadVoice",{serverId:n.serverId,isShowProgressTips:0==n.isShowProgressTips?0:1},n)},translateVoice:function(n){i("translateVoice",{localId:n.localId,isShowProgressTips:0==n.isShowProgressTips?0:1},n)},chooseImage:function(n){i("chooseImage",{scene:"1|2",count:n.count||9,sizeType:n.sizeType||["original","compressed"]},function(){return n._complete=function(n){if(b){var t=n.localIds;t&&(n.localIds=JSON.parse(t))}},n}())},previewImage:function(n){i(r.previewImage,{current:n.current,urls:n.urls},n)},uploadImage:function(n){i("uploadImage",{localId:n.localId,isShowProgressTips:0==n.isShowProgressTips?0:1},n)},downloadImage:function(n){i("downloadImage",{serverId:n.serverId,isShowProgressTips:0==n.isShowProgressTips?0:1},n)},getNetworkType:function(n){var t=function(n){var t,i,r,u=n.errMsg;if(n.errMsg="getNetworkType:ok",t=n.subtype,delete n.subtype,t)n.networkType=t;else switch(i=u.indexOf(":"),r=u.substring(i+1)){case"wifi":case"edge":case"wwan":n.networkType=r;break;default:n.errMsg="getNetworkType:fail"}return n};i("getNetworkType",{},function(){return n._complete=function(n){n=t(n)},n}())},openLocation:function(n){i("openLocation",{latitude:n.latitude,longitude:n.longitude,name:n.name||"",address:n.address||"",scale:n.scale||28,infoUrl:n.infoUrl||""},n)},getLocation:function(n){n=n||{};i(r.getLocation,{type:n.type||"wgs84"},function(){return n._complete=function(n){delete n.type},n}())},hideOptionMenu:function(n){i("hideOptionMenu",{},n)},showOptionMenu:function(n){i("showOptionMenu",{},n)},closeWindow:function(n){n=n||{};i("closeWindow",{immediate_close:n.immediateClose||0},n)},hideMenuItems:function(n){i("hideMenuItems",{menuList:n.menuList},n)},showMenuItems:function(n){i("showMenuItems",{menuList:n.menuList},n)},hideAllNonBaseMenuItem:function(n){i("hideAllNonBaseMenuItem",{},n)},showAllNonBaseMenuItem:function(n){i("showAllNonBaseMenuItem",{},n)},scanQRCode:function(n){n=n||{};i("scanQRCode",{needResult:n.needResult||0,scanType:n.scanType||["qrCode","barCode"]},function(){return n._complete=function(n){var i,t;g&&(i=n.resultStr,i&&(t=JSON.parse(i),n.resultStr=t&&t.scan_code&&t.scan_code.scan_result))},n}())},openProductSpecificView:function(n){i(r.openProductSpecificView,{pid:n.productId,view_type:n.viewType||0},n)},addCard:function(n){for(var u,e,o=n.cardList,s=[],t=0,f=o.length;f>t;++t)u=o[t],e={card_id:u.cardId,card_ext:u.cardExt},s.push(e);i(r.addCard,{card_list:s},function(){return n._complete=function(n){var r,u,t,i=n.card_list;if(i){for(i=JSON.parse(i),r=0,u=i.length;u>r;++r)t=i[r],t.cardId=t.card_id,t.cardExt=t.card_ext,t.isSuccess=t.is_succ?!0:!1,delete t.card_id,delete t.card_ext,delete t.is_succ;n.cardList=i;delete n.card_list}},n}())},chooseCard:function(n){i("chooseCard",{app_id:f.appId,location_id:n.shopId||"",sign_type:n.signType||"SHA1",card_id:n.cardId||"",card_type:n.cardType||"",card_sign:n.cardSign,time_stamp:n.timestamp+"",nonce_str:n.nonceStr},function(){return n._complete=function(n){n.cardList=n.choose_card_info;delete n.choose_card_info},n}())},openCard:function(n){for(var u,e,o=n.cardList,s=[],t=0,f=o.length;f>t;++t)u=o[t],e={card_id:u.cardId,code:u.code},s.push(e);i(r.openCard,{card_list:s},n)},chooseWXPay:function(n){i(r.chooseWXPay,ut(n),n)}},t&&(n.wx=n.jWeixin=a),a}),function(){var n=function(n){n=n||{};this.apiUrl="http://api.weixin.gyyx.cn/jsapi/getjsconfig.ashx";this.fdsCfg=this.frdCfg=this.qqCfg=null;this.cfg=n;this.init()};n.prototype={version:1,constructor:n,init:function(){this.setCfg();this.wxReady();this.getCfg()},isArr:function(n){return n.length&&typeof n=="object"},isNormal:function(){var n=1;for(var t in this.cfg)this.isArr(this.cfg[t])&&(n=0);return n},setCfg:function(){var i=this.isNormal(),t=this,n=this.cfg;i?this.fdsCfg=this.frdCfg={title:n.title,desc:n.desc,link:n.link,imgUrl:n.imgUrl,success:function(){n.success&&n.success()},cancel:function(){n.cancel&&n.cancel()}}:(this.fdsCfg={title:t.isArr(n.title)?n.title[0]:n.title,link:t.isArr(n.link)?n.link[0]:n.link,imgUrl:t.isArr(n.imgUrl)?n.imgUrl[0]:n.imgUrl,success:function(){n.success&&(t.isArr(n.success)?n.success[0]():n.success())},cancel:function(){n.cancel&&(t.isArr(n.cancel)?n.cancel[0]():n.cancel())}},this.frdCfg={title:t.isArr(n.title)?n.title[1]?n.title[1]:n.title[0]:n.title,link:t.isArr(n.link)?n.link[1]?n.link[1]:n.link[0]:n.link,desc:t.isArr(n.desc)?n.desc[1]?n.desc[1]:n.desc[0]:n.desc,imgUrl:t.isArr(n.imgUrl)?n.imgUrl[1]?n.imgUrl[1]:n.imgUrl[0]:n.imgUrl,success:function(){n.success&&(t.isArr(n.success)?n.success[1]?n.success[1]():n.success[0]():n.success())},cancel:function(){n.cancel&&(t.isArr(n.cancel)?n.cancel[1]?n.cancel[1]():n.cancel[0]():n.cancel())}})},wxReady:function(){var n=this;wx.ready(function(){wx.onMenuShareTimeline(n.fdsCfg);wx.onMenuShareAppMessage(n.frdCfg)})},getCfg:function(){var n=document.createElement("script");n.type="text/javascript";n.src=this.apiUrl+"?weixinType="+this.cfg.game+"&SourceUrl="+encodeURI(window.location.href).replace(/&/g,"%26").replace(/=/g,"%3d")+"&isjavascript=true&debug="+(this.cfg.debug&&1==this.cfg.debug?"true":"false")+"&jsApiList=%27onMenuShareTimeline%27,%20%27onMenuShareAppMessage%27";document.getElementsByTagName("head")[0].appendChild(n)}};window.wxShare=function(t){return new n(t)}}(window,document);
/*
//# sourceMappingURL=gyyx_wxshare.min.js.map
*/